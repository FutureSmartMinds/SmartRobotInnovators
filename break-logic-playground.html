<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Expand Your Knowledge â€” Logical Conditions & Comparisons</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Blockly + Glowbit core (same order as Project 8) -->
  <script src="lib/blockly_compressed.js"></script>
  <script src="lib/blocks_compressed.js"></script>
  <script src="lib/javascript_compressed.js"></script>
  <script src="lib/msg/en.js"></script>
  <script src="assets/global.js"></script>
  <script src="lib/blockly_xml_patch.js"></script>

  <style>
    /* Match Project 8 container */
    .gb-wrapper{max-width:1100px;margin:0 auto;font-family:"Segoe UI",Roboto,Arial,sans-serif;}

    /* New heading/subhead look (distinct colors) */
    .gb-header{
      text-align:center;background:#F4E8FF;color:#6B21A8;font-size:22px;font-weight:800;
      padding:8px 12px;border-radius:12px;margin:8px 0 6px;box-shadow:0 1px 4px rgba(0,0,0,0.08);
    }
    .gb-subhead{
      text-align:center;background:#E6FFFB;color:#0F766E;font-size:16px;font-weight:800;
      padding:8px 12px;border-radius:10px;margin:0 0 10px;box-shadow:0 1px 3px rgba(0,0,0,0.06);
    }

    /* Optional intro bubble (kept visually similar to projects) */
    .gb-intro{text-align:center;font-size:16px;line-height:1.5;margin:0 0 10px;color:#374151;
              background:#e0f2fe;border-radius:6px;padding:10px 12px;box-shadow:0 1px 3px rgba(0,0,0,0.06);}

    .didyouknow{margin-top:18px;background:#fef9c3;border:2px solid #facc15;padding:10px 12px;
                border-radius:12px;color:#713f12;font-size:15px;font-weight:600;position:relative;
                box-shadow:0 2px 5px rgba(0,0,0,0.06);}
    .didyouknow::before{content:"";position:absolute;top:-10px;left:20px;border-width:0 10px 10px 10px;
                         border-style:solid;border-color:transparent transparent #fef9c3 transparent;}
    .didyouknow p{text-align:justify;margin:6px 0;}

    .nav-btns{display:flex;justify-content:space-between;gap:8px;margin-top:10px;flex-wrap:wrap;}
    .gb-btn{padding:8px 14px;border:none;border-radius:6px;font-weight:700;cursor:pointer;flex:1;text-align:center;}
    .gb-btn.next{background:#00A1D6;color:#fff;}
    .gb-btn.back{background:#6B7280;color:#fff;}

    /* Character under sidebar */
    .character-frame{text-align:center;margin-top:18px;}
    .character-frame img{
      width:85%;max-width:260px;height:auto;border-radius:12px;
      box-shadow:0 4px 12px rgba(0,0,0,0.25);object-fit:cover;
    }

    /* Ensure editor has visible height (safe on all pages) */
    #break-logic-playground-editor{height:560px;min-height:560px;background:#fff;}
  </style>
</head>

<body>
  <div class="gb-wrapper">
    <div class="gb-header">âœ¨ Expand Your Knowledge â€” Logical Conditions & Comparisons</div>
    <div class="gb-subhead">Teach GlowBit to make decisions like a tiny robot brain</div>

    <!-- Standard lesson shell (same pattern as Project 8) -->
    <div id="break-logic-playground"></div>
  </div>

  <script>
  (function waitForGlow(){
    if(!(window.Glowbit && window.Blockly)) return setTimeout(waitForGlow,120);

    /* Create the standard two-column UI, same call signature as Project 8 */
    const lesson = Glowbit.createLessonUI('break-logic-playground', {
      title: '',
      instructions: '',
      pixelSize: 28,
      // IMPORTANT: non-null defaultJson so Blockly injects with toolbox (like projects)
      defaultJson: { blocks:{ languageVersion:0, blocks:[] } }
    });
    if (lesson && lesson.workspace) lesson.workspace.clear();

    /* --- Sidebar content (your provided slides) --- */
    const stepCards = [
`<div style="display:flex;align-items:center;gap:12px;justify-content:center;margin-bottom:4px;">
   <!-- Optional hero: images/logic-hero-mia-glowbit.png -->
</div>
<h3 style="text-align:center;color:#6b21a8;">Welcome to the Logic Playground!</h3>
<div class="callout" style="border-left:6px solid #a78bfa;background:#f5f3ff;padding:8px 10px;border-radius:8px;color:#4c1d95;">
 Teach GlowBit to make choices. Youâ€™ll learn <strong>Ifâ€“Thenâ€“Else</strong> and <strong>Comparisons</strong>
 to prepare for <strong>your next projects</strong>.
</div>
<div>
 <strong>Real-life logic:</strong><br>
 â€¢ ğŸŒ§ï¸ If itâ€™s raining â†’ Then take umbrella â†’ Else wear a cap.<br>
 â€¢ ğŸ® If battery &gt; 50 â†’ Then keep playing â†’ Else charge it.<br>
 â€¢ ğŸš¦ If light is green â†’ Then go â†’ Else wait.
</div>`,

`<h3 id="logic-steps" style="text-align:center;color:#0f5132;">Ifâ€“Thenâ€“Else (Build it with the Gear)</h3>
<div style="margin:10px 0;padding:10px;border-radius:8px;background:#d1fae5;color:#0f5132;">
  <div>1) From <strong>Logic</strong>, drag an <strong>if</strong> block into your Workspace.</div>
  <div>2) Click the tiny gear 
    <span aria-hidden="true" style="display:inline-block;vertical-align:-2px;">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="#0f5132">
        <path d="M19.14,12.94c.04-.31,.06-.63,.06-.94s-.02-.63-.06-.94l2.03-1.58c.18-.14,.23-.4,.12-.61l-1.92-3.32c-.11-.21-.36-.3-.58-.22l-2.39,.96c-.5-.38-1.03-.69-1.62-.92l-.36-2.54c-.04-.23-.23-.4-.47-.4h-3.84c-.24,0-.43,.17-.47,.4l-.36,2.54c-.59,.23-1.12,.54-1.62,.92l-2.39-.96c-.22-.09-.47,0-.58,.22l-1.92-3.32c-.11-.21-.06-.47,.12-.61l2.03,1.58c-.04,.31-.06,.63-.06,.94s.02,.63,.06,.94l-2.03,1.58c-.18,.14-.23,.4-.12,.61l1.92,3.32c.11,.21,.36,.3,.58,.22l2.39-.96c.5,.38,1.03,.69,1.62,.92l.36,2.54c.04,.23,.23,.4,.47,.4h3.84c.24,0,.43-.17,.47-.4l.36-2.54c.59-.23,1.12-.54,1.62-.92l2.39,.96c.22,.09,.47,0,.58-.22l1.92-3.32c.11-.21,.06-.47-.12-.61l-2.03-1.58ZM12,15.5c-1.93,0-3.5-1.57-3.5-3.5s1.57-3.5,3.5-3.5,3.5,1.57,3.5,3.5-1.57,3.5-3.5,3.5Z"/>
      </svg>
    </span> to open the <strong>mutator</strong> panel.</div>
  <div>3) Drag an <strong>else</strong> piece into the structure so it reads: <em>if â€¦ do â€¦ else â€¦</em></div>
  <div>4) Close the panel â€” you now have a full <strong>Ifâ€“Thenâ€“Else</strong> block!</div>
  <div class="mini-badge" style="display:inline-block;background:#fde68a;color:#92400e;border:1px solid #f59e0b;border-radius:6px;padding:2px 6px;font-size:12px;font-weight:800;margin-top:6px;">Tip</div>
  Put blocks in the <em>then</em> and <em>else</em> parts to see different results.
</div>`,

`<h3 style="text-align:center;color:#0f172a;">Comparisons: Three Symbols</h3>
<div style="margin:10px 0;padding:10px;border-radius:8px;background:#e0f2fe;color:#0f172a;">
 <ol style="margin:0 0 6px 18px;">
   <li><strong>=</strong> means â€œis equal toâ€.<br>Example: <code>120 = 120</code> âœ… (true)</li>
   <li><strong>&lt;</strong> means â€œis less thanâ€.<br>Example: <code>80 &lt; 120</code> âœ… (true)</li>
   <li><strong>&gt;</strong> means â€œis greater thanâ€.<br>Example: <code>150 &gt; 120</code> âœ… (true)</li>
 </ol>
 <div style="margin-top:8px;">Change the symbol using the dropdown on the compare block.</div>
</div>`,

`<h3 style="text-align:center;color:#0f172a;">What are we comparing?</h3>
<div style="margin:10px 0;padding:10px;border-radius:8px;background:#f1f5f9;color:#0f172a;">
  Think of a comparison as <strong>X ? Y</strong> where <strong>?</strong> is one of <strong>=</strong>, <strong>&lt;</strong>, <strong>&gt;</strong>.<br><br>
  <ul style="margin:0 0 6px 18px;">
    <li><strong>X</strong> (left side) can be a <em>changing sensor value</em> like <strong>sound level</strong>.</li>
    <li><strong>Y</strong> (right side) is often a <em>fixed number</em> (a threshold), like <strong>100</strong> or <strong>120</strong>.</li>
  </ul>
  Examples:<br>
  â€¢ <code>sound level &gt; 120</code> â†’ loud<br>
  â€¢ <code>sound level &lt; 100</code> â†’ quiet
</div>`,

`<h3 style="text-align:center;color:#065f46;">Challenge: Button A + Ifâ€“Thenâ€“Else</h3>
<div style="margin:10px 0;padding:10px;border-radius:8px;background:#d1fae5;color:#065f46;">
  <strong>Goal:</strong> When you press <strong>Button A</strong>, check the sound. If itâ€™s quiet, show a heart; otherwise, show a smile.<br><br>
  <ol style="margin:0 0 6px 18px;">
    <li>From <strong>Input</strong>, drag <strong>on button A pressed</strong> to the Workspace.</li>
    <li>From <strong>Logic</strong>, drag an <strong>if</strong> block inside it. Click the <strong>gear</strong> and add <strong>else</strong>.</li>
    <li>From <strong>Logic</strong>, drag a <strong>compare</strong> block (A ? B) into the ifâ€™s slot. Change <code>?</code> to <strong>&lt;</strong>.</li>
    <li>From <strong>Input</strong>, place <strong>sound level</strong> in the left side (A). From <strong>Math</strong>, place a <strong>number</strong> <code>100</code> on the right side (B).</li>
    <li>In the <strong>then</strong> part: add <strong>show icon â†’ heart</strong> (optional: then a <strong>pause 400 ms</strong> and <strong>clear screen</strong>).</li>
    <li>In the <strong>else</strong> part: add <strong>show icon â†’ smile</strong> (optional pause + clear).</li>
    <li>Click <strong>Run</strong>, then press <strong>A</strong>. Try talking quietly vs loudlyâ€”does it switch?</li>
  </ol>
</div>`,

`<h3 style="text-align:center;color:#00A1D6;">Practice Zone</h3>
<div style="margin:10px 0;padding:10px;border-radius:8px;background:#e0f2fe;color:#0f172a;">
  <div><strong>Practice 1 â€” â€œShhh or Loudâ€</strong><br>
  If <em>sound level &gt; 120</em> â†’ show <strong>â€œLOUDâ€</strong>; else show <strong>â€œssshâ€</strong>.</div>
  <hr style="border:none;border-top:1px dashed #94a3b8;margin:10px 0;">
  <div><strong>Practice 2 â€” â€œBright vs Dimâ€</strong><br>
  If <em>sound level &lt; 100</em> â†’ set brightness <strong>50</strong>; else <strong>200</strong>.</div>
</div>`,

`<h3 style="text-align:center;color:#00A1D6;">Did You Know?</h3>
<div class="didyouknow">
  ğŸ’¡ <strong>Real-world logic is everywhere:</strong>
  <p>ğŸš¶ Crosswalks: If the button is pressed â†’ then walk signal; else wait.</p>
  <p>ğŸŒ¡ï¸ Thermostats: If temperature &lt; target â†’ then heat; else stop.</p>
  <p>ğŸ—£ï¸ Smart speakers: If wake word heard â†’ then listen; else sleep.</p>
  <p>ğŸ­ Factory lights: If a machine is too loud/hot â†’ then alert.</p>
</div>`
    ];

    /* --- Sidebar auto-pagination (same mechanism as Project 8, but no debounce var) --- */
    function paginate(){
      const sidebar = document.querySelector('#break-logic-playground .glowbit-left');
      if(!sidebar) return;
      const editor = document.getElementById('break-logic-playground-editor');
      const targetH = (editor && editor.offsetHeight) ? editor.offsetHeight : 520;

      const meas = document.createElement('div');
      meas.style.visibility='hidden'; meas.style.position='absolute';
      meas.style.left='-9999px'; meas.style.top='-9999px';
      meas.style.width = (sidebar.clientWidth || 320) + 'px';
      document.body.appendChild(meas);

      const pages = []; let current = []; const reserve = 56;
      stepCards.forEach(html=>{
        const c = document.createElement('div'); c.innerHTML = html; meas.appendChild(c);
        const tooTall = meas.scrollHeight > (targetH - reserve);
        if(tooTall){
          if(current.length===0){ pages.push([html]); meas.innerHTML=''; }
          else {
            pages.push([...current]); current=[html]; meas.innerHTML='';
            current.forEach(h=>{ const d=document.createElement('div'); d.innerHTML=h; meas.appendChild(d); });
          }
        } else current.push(html);
      });
      if(current.length) pages.push(current);
      document.body.removeChild(meas);

      function render(i){
        sidebar.innerHTML = pages[i].join('');

        const nav=document.createElement('div');nav.className='nav-btns';
        if(i>0){const b=document.createElement('button');b.textContent='â¬… Back';b.className='gb-btn back';b.onclick=()=>render(i-1);nav.appendChild(b);}
        if(i<pages.length-1){const n=document.createElement('button');n.textContent='Next âœ';n.className='gb-btn next';n.onclick=()=>render(i+1);nav.appendChild(n);}
        sidebar.appendChild(nav);

        const frame=document.createElement('div');frame.className='character-frame';
        frame.innerHTML='<img src="images/GlowBit3.png" alt="GlowBit buddy">';sidebar.appendChild(frame);
      }
      render(0);
    }
    paginate();

    // Simple resize handler (no timer variables)
    window.addEventListener('resize', ()=>{
      paginate();
      if (lesson && lesson.workspace) Blockly.svgResize(lesson.workspace);
    });

    console.log('âœ… Logic Playground page ready.');
  })();
  </script>
</body>
</html>
