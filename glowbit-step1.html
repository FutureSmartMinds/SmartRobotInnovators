<!-- STEP 1: SHOW TEXT ‚Äî restored base script (colors updated) -->
<style>
  .gb-wrapper { max-width:1100px; margin:0 auto; font-family:"Segoe UI", Roboto, Arial, sans-serif; }
  .gb-header {
    text-align:center;
    background: #e6f9ff;            /* lighter background that matches #00A1D6 */
    color: #00A1D6;                 /* main heading font color requested */
    font-size:22px;
    font-weight:800;
    padding:6px 10px;
    border-radius:8px;
    margin-bottom:8px;
    box-shadow:0 1px 4px rgba(0,0,0,0.08);
  }
  .gb-header .highlight { color:#991b1b; } /* optional contrasting highlight (kept from your working script) */

  .gb-intro {
    text-align:center;
    font-size:14px;
    line-height:1.4;
    margin:0 0 10px;
    color:#374151;
    background:#e0f2fe;
    border-radius:6px;
    padding:8px 10px;
    box-shadow:0 1px 3px rgba(0,0,0,0.06);
  }

  /* keep playground compact */
  #glowbit-step1 .glowbit-playground { max-height:500px; overflow-y:auto !important; border-radius:6px; }

  /* Did you know bubble (kept as-is) */
  .didyouknow {
    margin-top:18px;
    background:#fef9c3;
    border:2px solid #facc15;
    padding:10px 12px;
    border-radius:12px;
    color:#713f12;
    font-size:13px;
    font-weight:600;
    position:relative;
    box-shadow:0 2px 5px rgba(0,0,0,0.06);
  }
  .didyouknow::before {
    content:"";
    position:absolute;
    top:-10px;
    left:20px;
    border-width:0 10px 10px 10px;
    border-style:solid;
    border-color:transparent transparent #fef9c3 transparent;
  }
</style>

<div class="gb-wrapper">
  <!-- Top Heading -->
  <div class="gb-header">
  üåü <span style="color:#7B2CBF;">Step 1</span>: Show Text ‚Äî Teach <span style="color:#7B2CBF;">GlowBit</span> to Talk!
</div>

  <!-- Intro Text -->
  <p class="gb-intro">
    Welcome to your very first <span class="highlight">GlowBit</span> adventure! In this step, you‚Äôll teach
    <span class="highlight">GlowBit</span> to ‚Äúspeak‚Äù using lights on its 8√ó8 LED grid. You‚Äôll code
    <span class="highlight">GlowBit</span> to scroll the words <strong class="highlight">Smart Robot</strong> across its glowing face.
  </p>

  <!-- Glowbit embed container only (we replace Glowbit's sidebar in-place via JS) -->
  <div id="glowbit-step1"></div>
</div>

<script>
(function waitForGlow() {
  if (window.Glowbit && window.Blockly) {
    // Use the same default blocks you provided in the file (restored)
    const startBlocks = {
      "blocks": {
        "languageVersion": 0,
        "blocks": [
          {
            "type": "show_text",
            "x": 20,
            "y": 20,
            "fields": { "TEXT": "Smart Robot" }
          }
        ]
      }
    };

    // createLessonUI with empty title/instructions ‚Äî prevents Glowbit auto-injecting page header text
    const lesson = Glowbit.createLessonUI('glowbit-step1', {
      title: '',
      instructions: '',
      pixelSize: 28,
      defaultJson: startBlocks
    });
    window._lesson_step1 = lesson;

    // Replace Glowbit's sidebar content (robust scan & replace).
    // Sidebar heading text color set to #00A1D6; step cards unified with solid blue + white text.
    function overrideSidebar() {
      const container = document.querySelector('#glowbit-step1');
      if (!container) return;

      const sidebar = Array.from(container.querySelectorAll('*')).find(el =>
        el.innerText && (
          el.innerText.includes("GlowBit Lesson") ||
          el.innerText.includes("Follow the steps on the right")
        )
      );

      if (sidebar) {
        // light background for sidebar container (matches heading)
        sidebar.style.background = '#e6f9ff';
        sidebar.style.borderRadius = '10px';
        sidebar.style.padding = '12px';
        sidebar.style.color = '#00A1D6';   // "Follow These Steps" main color
        sidebar.style.fontSize = '14px';
        sidebar.style.fontWeight = '500';
        sidebar.style.boxShadow = '0 0 8px rgba(0,0,0,0.08)';

        // unified step-card color + white text for readability
        const stepCardStyle = 'margin:10px 0;padding:10px;border-radius:8px;background:#0284C7;color:#ffffff;font-weight:600;';

        sidebar.innerHTML =
          '<h3 style="color:#00A1D6;font-weight:800;font-size:16px;margin-bottom:10px;text-align:center;">üåü Follow These Steps üåü</h3>' +
          '<div style="' + stepCardStyle + '">üß© <strong>Go to the "Basic" tab</strong>. Drag the <strong>Show Text</strong> block into the workspace.</div>' +
          '<div style="' + stepCardStyle + '">‚úçÔ∏è <strong>Click the text field</strong> (it says "Hello!" by default). Type <strong>Smart Robot</strong>.</div>' +
          '<div style="' + stepCardStyle + '">üì¶ <strong>Find the "on start"</strong> block in Basic. Drag your Show Text block inside it.</div>' +
          '<div style="' + stepCardStyle + '">‚ñ∂Ô∏è <strong>Click Run Program</strong>. Watch GlowBit scroll <strong>Smart Robot</strong> across its face!</div>' +
          '<div class="didyouknow">üí° <strong>Did you know?</strong> Robots in real life often use screens or lights to share messages, and now you‚Äôll get to try it too.</div>';
      }
    }

    // Run immediately and repeatedly (10s) to win any re-renders from Glowbit
    overrideSidebar();
    const sid = setInterval(overrideSidebar, 500);
    setTimeout(() => clearInterval(sid), 10000);

    if (typeof Glowbit.showIcon === 'function') Glowbit.showIcon('smile');

  } else {
    setTimeout(waitForGlow, 120);
  }
})();
</script>

