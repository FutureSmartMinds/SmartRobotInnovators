<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GlowBit â€“ Step 4</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Blockly + Global -->
  <script src="lib/blockly_compressed.js"></script>
  <script src="lib/blocks_compressed.js"></script>
  <script src="lib/javascript_compressed.js"></script>
  <script src="lib/msg/en.js"></script>
  <script src="assets/global.js"></script>
  <script src="lib/blockly_xml_patch.js"></script>

  <style>
    /* ---------- Shared layout ---------- */
    body {
      margin:0;
      background:#f9fafb;
      font-family:"Segoe UI",Roboto,Arial,sans-serif;
    }
    .gb-wrapper {
      max-width:1100px;
      margin:0 auto;
      padding:8px 12px;
    }

    /* ---------- Header + subtitle (same as Step 1) ---------- */
    .gb-header {
      text-align:center;
      background:#e0f2fe;
      color:#1e3a8a;
      font-size:22px;
      font-weight:800;
      padding:10px 12px;
      border-radius:12px;
      margin:8px 0 6px;
      box-shadow:0 1px 4px rgba(0,0,0,0.08);
    }
    .gb-intro {
      text-align:center;
      font-size:18px;
      line-height:1.5;
      margin:0 0 12px;
      color:#1e3a8a;
      background:#e0f2fe;
      border:3px solid #7dd3fc;
      border-radius:10px;
      padding:10px 14px;
      font-weight:600;
      box-shadow:0 2px 6px rgba(0,0,0,0.08);
    }

    /* ---------- Sidebar & Did-You-Know ---------- */
    .glowbit-left {
      width:320px;
      padding:12px;
      box-sizing:border-box;
      background:#f0f9ff;
      border-radius:10px;
    }
    .didyouknow {
      background:#fef9c3;
      border-left:6px solid #facc15;
      border-radius:10px;
      padding:10px 12px;
      color:#78350f;
      font-weight:500;
      margin-top:10px;
      box-shadow:0 2px 5px rgba(0,0,0,0.05);
    }
    .character-frame {
      text-align:center;
      margin-top:18px;
    }
    .character-frame img {
      width:85%;
      max-width:260px;
      border-radius:12px;
      box-shadow:0 4px 12px rgba(0,0,0,0.25);
    }

    /* ---------- Blockly editor area ---------- */
    #glowbit-step4-editor {
      height:560px;
      min-height:560px;
      background:#fff;
      border-radius:10px;
    }
  </style>
</head>

<body>
  <div class="gb-wrapper">
    <div class="gb-header">GlowBit â€“ Step 4 : More LED Magic!</div>
    <div class="gb-intro">
      Ready to learn how to blink and flash colors with style? <br>
      Letâ€™s make GlowBit dance with light patterns!
    </div>

    <div id="glowbit-step4"></div>
  </div>

  <script>
  (function boot(){
    if(!(window.Glowbit && window.Blockly)) return setTimeout(boot,100);

    const lesson = Glowbit.createLessonUI('glowbit-step4',{
      title:'',
      instructions:'',
      pixelSize:28,
      defaultJson:{blocks:{languageVersion:0,blocks:[]}}
    });
    if(lesson && lesson.workspace) lesson.workspace.clear();

    /* --- Sidebar override (adds image) --- */
    const sidebar = document.querySelector('#glowbit-step4 .glowbit-left');
    if(sidebar){
      sidebar.innerHTML = `
        <h3 style="text-align:center;color:#1e3a8a;">Step 4 â€” Your Next Move</h3>
        <div class="didyouknow">
          ðŸ’¡ <strong>Did you know?</strong><br>
          Traffic lights and signs use patterns and colors to communicateâ€”GlowBitâ€™s LEDs work the same way!
        </div>
        <div class="character-frame">
          <img src="images/GlowBit1.png" alt="GlowBit waving hello">
        </div>
      `;
    }
  })();
  </script>
</body>
</html>
